// Nitro.min.js - v0.0.3
var Nitro;
(function(g){function u(a){m.push(a);g.DIGEST_USING_MICROTASKS?v||window.queueMicrotask(E):-1===n&&(n=window.requestAnimationFrame(F))}function E(){v=!1;t()}function F(){n=-1;t()}function t(){try{for(const a of m)a.getElement();m=[]}catch(a){throw console.error("Exception thrown during Nitro.digest()."),m=[],a;}}function w(a){a=m.indexOf(a);-1!==a&&m.splice(a,1)}function x(a,b){const c=b.toLowerCase();c in a&&(b=c);b.startsWith("data-")?a.removeAttribute(b):a[b]=G[b]}function y(a,b,c){if(void 0===c)x(a,
b);else{var d=b.toLowerCase();d in a&&(b=d);if("style"===b&&"object"===typeof c){a.setAttribute("style","");for(const e in c)a.style[e]=c[e]}else b.startsWith("data-")?a.setAttribute(b,c):"children"!==b&&(a[b]=c)}}function z(a,b){const c=a.__attributes;for(const d in c)null!==b&&d in b||x(a,d);for(const d in b)"key"===d||null!==c&&c[d]===b[d]||y(a,d,b[d]);a.__attributes=b}function A(a,b){const c=document.body.contains(a);var d=a.childNodes;let e=0,f=0;for(;f<b.length;){const h=b[f];if(void 0===d[e])a.appendChild(h),
c&&h instanceof Element&&q(h);else if(d[e]!==h){const l=d[e];a.replaceChild(h,l);c&&(l instanceof Element&&-1===b.indexOf(l)&&r(l),h instanceof Element&&q(h))}e++;f++}for(b=d.length-e;0<b;)d=a.lastChild,a.removeChild(d),c&&d instanceof Element&&r(d),b--}function q(a){a.__was_mounted&&a.__was_mounted();a=a.children;for(let b=0;b<a.length;b++)q(a[b])}function r(a){a.__was_unmounted&&a.__was_unmounted();a=a.children;for(let b=0;b<a.length;b++)r(a[b])}let B;(function(a){a[a.NOT_MOUNTED=0]="NOT_MOUNTED";
a[a.MOUNTED_UNDER_ANOTHER_COMPONENT=1]="MOUNTED_UNDER_ANOTHER_COMPONENT";a[a.MOUNTED_DIRECTLY_UNDER_ELEMENT=2]="MOUNTED_DIRECTLY_UNDER_ELEMENT"})(B||(B={}));g.DEBUG_MODE=!0;g.DIGEST_USING_MICROTASKS=!0;var m=[],n=-1,v=!1;g.digest=function(){t();-1!==n&&(window.cancelAnimationFrame(n),n=-1)};class C{constructor(){this.key=null;this._dirty=!0;this._renderer=this.element=null;this._mountedState=0;this.input=null;this.render.length&&(this._renderer=new D)}setInput(a){const b=this.input;if(null!==b||null!==
a)this.input=a,this.inputChanged(b,a);this.setDirty()}inputChanged(a,b){}setDirty(){this._dirty||(this._dirty=!0,u(this))}isMounted(){return 0!==this._mountedState}mountUnder(a){if(g.DEBUG_MODE&&this._mountedState)throw Error("mountUnder() called on a component that is already mounted");a.appendChild(this.getElement());q(this.element);this._mountedState=2}unmount(){if(g.DEBUG_MODE&&2!==this._mountedState)throw Error("Cannot unmount component, component has not been mounted using Component.mountUnder(parent: HTMLElement)");
this.element.parentElement.removeChild(this.element);r(this.element)}wasMounted(){}wasUnmounted(){}getElement(){this._dirty&&this.rerender();return this.element}rerender(){let a;const b=this._renderer;try{null===b?a=this.render():(b.setupForNewRenderPass(),a=this.render(b))}catch(c){throw w(this),c;}if(g.DEBUG_MODE&&null===this.element&&!(a instanceof HTMLElement))throw Error("Element for component "+this.constructor.name+" is not defined and render() did not return an instance of HTMLElement!");
if(void 0!==a){if(g.DEBUG_MODE&&null!==this.element&&a!==this.element)throw w(this),Error("Nitro does not support swapping out the root element of a component! Component: "+this.constructor.name+". You may need to add a key to the root element of the component.");null===this.element&&(this.element=a)}void 0===this.element.__was_mounted&&this.attachMountHandlers(this.element);this._dirty=!1}attachMountHandlers(a){a.__was_mounted=()=>{this._mountedState||(this._mountedState=1,this.wasMounted(),this._dirty&&
u(this))};a.__was_unmounted=()=>{this._mountedState=0;this.wasUnmounted()}}childByKey(a){return null===this._renderer?null:this._renderer.getElementByKey(a)}}g.Component=C;class H extends C{setInput(a){if(g.DEBUG_MODE&&"object"!==typeof a)throw Error("Non-object input value given to instance of PureComponent, this will produce undesired behavior.");const b=this.input;let c=!1;if(null===b)c=!0;else for(const d in a)if(b[d]!==a[d]){c=!0;break}c&&(this.input=a,this.inputChanged(b,a),this.setDirty())}}
g.PureComponent=H;var G=document.createElement("div");class D{constructor(){this.components=[];this.previousComponents=[];this.elements=[];this.previousElements=[]}create(a,b,...c){var d=null===b||void 0===b.key?null:b.key;0<c.length&&(null===b?b={children:c}:b.children=c);if("string"===typeof a){var e=null,f=this.previousElements;if("string"===typeof d)for(var h=0;h<f.length;h++){const p=f[h];if((p.__attributes?p.__attributes.key:void 0)===d){if(g.DEBUG_MODE&&p.tagName!==a.toUpperCase())throw Error("Cannot reuse key for an element of a different tagName, current: "+
p.tagName+", new: "+a.toUpperCase()+".");f.splice(h,1);z(p,b);e=p;break}}if(null===e)for(d=0;d<f.length;d++)if(h=f[d],void 0===(h.__attributes?h.__attributes.key:void 0)&&h.tagName.toLowerCase()===a.toLowerCase()){f.splice(d,1);z(h,b);e=h;break}if(null===e){e=document.createElement(a);if(null!==b)for(var l in b)"key"!==l&&y(e,l,b[l]);e.__attributes=b}a=[];b=c;d=[];c=b.length;for(f=0;f<c;f++)l=b[f],Array.isArray(l)?d.push(...l):d.push(l);c=d;for(var k of c)if(null!==k&&!1!==k){if("string"===typeof k)b=
document.createTextNode(k);else if(k instanceof HTMLElement)b=k;else{if(g.DEBUG_MODE&&!(k instanceof g.Component))throw Error("Cannot treat value as child: "+k+", must be a string, HTMLElement, Component, null, or false.");b=k.getElement()}a.push(b)}A(e,a);this.elements.push(e);return e}e=null;k=this.previousComponents;if("string"===typeof d)for(c=0;c<k.length;c++)if(f=k[c],f.key===d){if(g.DEBUG_MODE&&!(f instanceof a))throw Error("Cannot reuse key for a component of a different class, current: "+
f.constructor.name+", new: "+a.name+".");k.splice(c,1);e=f;break}if(null===e)for(c=0;c<k.length;c++)if(f=k[c],null===f.key&&f instanceof a){k.splice(c,1);e=f;break}null===e&&(e=new a);e.setInput(b);e.key=d;this.components.push(e);return e.getElement()}setupForNewRenderPass(){this.previousComponents=this.components;this.components=[];this.previousElements=this.elements;this.elements=[]}getElementByKey(a){for(const b of this.elements){const c=b.__attributes;if(c&&"string"===typeof c.key&&c.key===a)return b}for(const b of this.components)if(b.key===
a)return b;return null}}g.Renderer=D;g.updateChildren=function(a,b){b=b.map(c=>c instanceof g.Component?c.getElement():c);A(a,b)}})(Nitro||(Nitro={}));window.Nitro=Nitro;
